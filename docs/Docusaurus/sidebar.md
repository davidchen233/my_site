---
sidebar_position: 5
---

# Docusaurus - Docs の Sidebar

- 會顯示在 Docs 旁邊，可以用來歸類相關的文件

## 🔆 加入 Sidebar

1. 建立一個檔案，並 export 一個 dictionary 的 [Sidebar Objects](https://docusaurus.io/docs/sidebar#sidebar-object)
2. 把這個 Object 傳入 `@docusaurus/plugin-docs` 或 `@docusaurus/preset-classic`
   ```javascript
   // docusaurus.config.js
   module.exports = {
     presets: [
       [
         "@docusaurus/preset-classic",
         {
           docs: {
             sidebarPath: require.resolve("./sidebars.js"),
           },
         },
       ],
     ],
   };
   ```

- [docusaurus 範例](https://docusaurus.io/docs/sidebar#complex-sidebars-example)

## 🔆 自動產生的 Sidebar [#](https://docusaurus.io/docs/sidebar/autogenerated)

- 如果沒有特別設置，Docusaurus 會自動用 filesystem 的結構幫你產生一個

  ```typescript
  type SidebarItemAutogenerated = {
    type: "autogenerated";
    dirName: string; // 要用來產生 sidebar 的資料夾 (使用從 docs 資料夾開始的相對路徑)
  };

  // sidebar.js (example)
  module.exports = {
    mySidebar: [
      {
        type: "autogenerated",

        // generate sidebar from the docs folder
        // (or versioned_docs/<version>)
        dirName: ".",
      },
    ],
  };
  ```

### 🛠️ Category index 習慣

- Docusaurus 可以自動連到指定 category 的 index document
- 建立 index document 有一些方式
  - 命名 `index` (大小寫有差) - Ex. docs/Guides/index.md
  - 命名 `README` (大小寫有差) - Ex. docs/Guides/README.mdx
  - 和資料夾名稱相同 - Ex. docs/Guides/Guides.md

## 🔆 Sidebar Object

- 能定義類別、子連結等等
  ```typescript
  type Sidebar =
    // Normal syntax
    | SidebarItem[]
    // Shorthand syntax
    | { [categoryLabel: string]: SidebarItem[] };
  ```
- Example - Export 一個叫做 mySidebar 的 sidebar，包含了三個 items
  ```javascript
  // sidebars.js
  module.exports = {
    mySidebar: [
      {
        type: "category",
        label: "Getting Started",
        items: [
          {
            type: "doc",
            id: "doc1",
          },
        ],
      },
      {
        type: "category",
        label: "Docusaurus",
        items: [
          {
            type: "doc",
            id: "doc2",
          },
          {
            type: "doc",
            id: "doc3",
          },
        ],
      },
      {
        type: "link",
        label: "Learn more",
        href: "https://example.com",
      },
    ],
  };
  ```

### 🛠️ Sidebar Item

#### Doc

- 用來連到指定 Doc 頁面，並將頁面放進 Sidebar 中
  :::warning
  如果使用 `autogenerated` 的 Sidebar，將無法透過 item 去定義要顯示的 label，
  可以使用 Markdown Forn Matter 的 `sidebar_label` 來設置。
  也可以使用 `sidebar_custom_props` 來針對單一 Doc 設置 MetaData
  :::

  ```typescript
  type SidebarItemDoc =
    // Normal syntax
    | {
        type: "doc";
        id: string;
        label: string; // Sidebar label text
        className?: string; // Class name for sidebar label
        customProps?: Record<string, unknown>; // Custom props
      }

    // Shorthand syntax
    | string; // docId shortcut
  ```

- Example

  ```javascript
  // sidebars.js
  module.exports = {
    mySidebar: [
      // Normal syntax:
      {
        type: "doc",
        id: "doc1", // document ID
        label: "Getting started", // sidebar label
      },

      // Shorthand syntax:
      "doc2", // document ID
    ],
  };
  ```

- Doc 可以使用縮寫 (使用 Doc ID)

  ```javascript
  // Longhand
  module.exports = {
    sidebar: [
      {
        type: "doc",
        id: "myDoc",
      },
    ],
  };

  // Shorthand
  module.exports = {
    sidebar: ["myDoc"],
  };
  ```

  - 放在 category items 裡面也是一樣
    ```javascript
    module.exports = {
      mySidebar: [
        {
          type: "category",
          label: "Getting Started",
          items: ["doc1"],
        },
        {
          type: "category",
          label: "Docusaurus",
          items: ["doc2", "doc3"],
        },
        {
          type: "link",
          label: "Learn more",
          href: "https://example.com",
        },
      ],
    };
    ```

#### Link

- 用來連到非 Docs 的頁面 (其他內部或外部連結)
  ```typescript
  type SidebarItemLink = {
    type: "link";
    label: string;
    href: string;
    className?: string;
    description?: string;
  };
  ```
- Example

  ```javascript
  // sidebars.js
  module.exports = {
    myLinksSidebar: [
      // External link
      {
        type: "link",
        label: "Facebook", // The link label
        href: "https://facebook.com", // The external URL
      },

      // Internal link
      {
        type: "link",
        label: "Home", // The link label
        href: "/", // The internal path
      },
    ],
  };
  ```

#### HTML

- 用來 render 客製化的 HTML 到 item 的 `<li>` 中，
  可以拿來做一些像是 Devider、Ads、Image 等用途
  :::warning
  因為本來就會被包在 `<li>` 中，所以如果是單純的文字，就直接在 `value` 放入純文字就好
  :::
  ```typescript
  type SidebarItemHtml = {
    type: "html";
    value: string;
    defaultStyle?: boolean; // 使用預設的 menu item 外觀
    className?: string;
  };
  ```
- Example
  ```javascript
  // sidebars.js
  module.exports = {
    myHtmlSidebar: [
      {
        type: "html",
        value: '<img src="sponsor.png" alt="Sponsor" />', // 要 Render 的 HTML
        defaultStyle: true, // 使用預設的 menu item 外觀
      },
    ],
  };
  ```

### 🛠️ Category

- 用來歸類 Sidebar Items

  ```typescript
  type SidebarItemCategory = {
    type: "category";
    label: string; // Sidebar label text.
    items: SidebarItem[]; // Array of sidebar items.
    className?: string;
    description?: string;

    // Category options:
    collapsible: boolean; // 設置此 Category 是否可以收合
    collapsed: boolean; // 使此 Category 預設為展開或收合
    link: SidebarItemCategoryLinkDoc | SidebarItemCategoryLinkGeneratedIndex;
  };
  ```

- Example

  ```javascript
  // sidebars.js
  module.exports = {
    docs: [
      {
        type: "category",
        label: "Guides",
        collapsible: true,
        collapsed: false,
        items: [
          "creating-pages",
          {
            type: "category",
            label: "Docs",
            items: [
              "introduction",
              "sidebar",
              "markdown-features",
              "versioning",
            ],
          },
        ],
      },
    ],
  };

  // Shorthand (沒有要客製化的時候可以用)
  // key 為她的 Label，value 是 subitems[]
  module.exports = {
    docs: {
      Guides: [
        "creating-pages",
        {
          Docs: ["introduction", "sidebar", "markdown-features", "versioning"],
        },
      ],
    },
  };
  ```

### 🛠️ Category Links

- 產生一個用來選擇 Category 的導覽頁
  :::info
  自動產生的 Categories 可以透過 `_category_yml` 來定義 Links
  :::
  ![](https://hackmd.io/_uploads/SkbV7aWH3.png)

#### 自動生成 index page

- 可以自動產生一個包含底下所有 Direct Children Links 的 Index Page
- 可以透過 `slug` 去客製化被產生的 page route ( default: `/category/[categoryName]` )
- Example
  ```javascript
  // sidebars.js
  module.exports = {
    docs: [
      {
        type: "category",
        label: "Guides",
        link: {
          type: "generated-index",
          title: "Docusaurus Guides",
          description: "Learn about the most important Docusaurus concepts!",
          slug: "/category/docusaurus-guides",
          keywords: ["guides"],
          image: "/img/docusaurus.png",
        },
        items: ["pages", "docs", "blog", "search"],
      },
    ],
  };
  ```
- 可以將產生的 index 放進一般的 doc page

  - 使用 `DocCardList` 後會顯示此 Doc 的 parent 底下所有的 children

    ```markdown
    # docs/sidebar/index.mdx

    import DocCardList from '@theme/DocCardList';

    <DocCardList />
    ```

#### Doc Link

- Category 可以連到某個 Doc 頁面
  ```javascript
  module.exports = {
    docs: [
      {
        type: "category",
        label: "Guides",
        link: { type: "doc", id: "introduction" },
        items: ["pages", "docs", "blog", "search"],
      },
    ],
  };
  ```

## 🔆 使用多個 Sidebars [#](https://docusaurus.io/docs/sidebar/multiple-sidebars)

:::warning
不要綁定同個 Doc 頁面到多個 Sidebar，否則當個頁面將無法保證會顯示哪個 Sidebar
:::

- 同一個 sidebars 檔案，可以放置多個 Sidebar Object，用 key 來辨識
  ```typescript
  type SidebarsFile = {
    [sidebarID: string]: Sidebar;
  };
  ```
  ```javascript
  // sidebars.js
  module.exports = {
    tutorialSidebar: {
      "Category A": ["doc1", "doc2"],
    },
    apiSidebar: ["doc3", "doc4"],
  };
  ```
  瀏覽 `doc1` & `doc2` 的時候，會顯示 `tutorialSidebar`，瀏覽 `doc3` & `doc4` 時會顯示 `apiSidebar`

## 🔆 客製化 Sidebar 行為

### 🛠️ Hideable Sidebar

- 將 `themeConfig.docs.sidebar.hideable` 打開，能讓使用者暫時關閉 Sidebar，
  能方便在一些較小的裝置上閱讀
  ```javascript
  // docusaurus.config.js
  module.exports = {
    themeConfig: {
      docs: {
        sidebar: {
          hideable: true,
        },
      },
    },
  };
  ```

### 🛠️ Auto-collapse Sidebar 類別

- 將 `themeConfig.docs.sidebar.autoCollapseCategories ` 打開，會在展開某個類別時，
  將其他兄弟類別 collapse，讓閱讀者能專注在正在瀏覽的類別上
  ```javascript
  // docusaurus.config.js
  module.exports = {
    themeConfig: {
      docs: {
        sidebar: {
          autoCollapseCategories: true,
        },
      },
    },
  };
  ```
- 獨立設置 Sidebars 的 Collapse 相關 ( `sidebars.js` )
  - [collapsible categories](https://docusaurus.io/docs/sidebar/items#collapsible-categories)
  - [Expanded categories by default](https://docusaurus.io/docs/sidebar/items#expanded-categories-by-default)

### 🛠️ 傳入 Custom Props [#](https://docusaurus.io/docs/sidebar#passing-custom-props)

### 🛠️ Sidebar 麵包屑

- 預設情況下，麵包屑會依據 Sidebar Path 在最上面顯示當前頁面 (開啟狀態)
  ```javascript
  // docusaurus.config.js
  module.exports = {
    themeConfig: {
      docs: {
        breadcrumbs: false, // 可將其關閉
      },
    },
  };
  ```
